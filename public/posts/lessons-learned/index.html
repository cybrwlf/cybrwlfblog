<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.147.7">
    <meta name="generator" content="Relearn 7.6.1+4407b4364ab6f7477f7671fbd20c0494bade40ee">
    <meta name="description" content="Lessons Learned This post documents the challenges and solutions encountered while updating the automation scripts for my Hugo blog. The goal was to streamline the process of moving notes from Obsidian to Hugo and then deploying them to GitHub, including handling images.
Initial Setup &amp; The Mysterious Missing Images When I first set up the script, everything seemed okay, but images weren’t showing up on the deployed site. I’d embed them in Obsidian like this: ![[20240103Capture2.jpg]].">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Lessons Learned :: hugo-theme-relearn">
    <meta name="twitter:description" content="Lessons Learned This post documents the challenges and solutions encountered while updating the automation scripts for my Hugo blog. The goal was to streamline the process of moving notes from Obsidian to Hugo and then deploying them to GitHub, including handling images.
Initial Setup &amp; The Mysterious Missing Images When I first set up the script, everything seemed okay, but images weren’t showing up on the deployed site. I’d embed them in Obsidian like this: ![[20240103Capture2.jpg]].">
    <meta property="og:url" content="/posts/lessons-learned/index.html">
    <meta property="og:site_name" content="hugo-theme-relearn">
    <meta property="og:title" content="Lessons Learned :: hugo-theme-relearn">
    <meta property="og:description" content="Lessons Learned This post documents the challenges and solutions encountered while updating the automation scripts for my Hugo blog. The goal was to streamline the process of moving notes from Obsidian to Hugo and then deploying them to GitHub, including handling images.
Initial Setup &amp; The Mysterious Missing Images When I first set up the script, everything seemed okay, but images weren’t showing up on the deployed site. I’d embed them in Obsidian like this: ![[20240103Capture2.jpg]].">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Posts">
    <meta property="article:published_time" content="2025-06-06T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-06-06T00:00:00+00:00">
    <meta property="article:tag" content="Cybrwlf">
    <meta property="article:tag" content="Blog">
    <meta itemprop="name" content="Lessons Learned :: hugo-theme-relearn">
    <meta itemprop="description" content="Lessons Learned This post documents the challenges and solutions encountered while updating the automation scripts for my Hugo blog. The goal was to streamline the process of moving notes from Obsidian to Hugo and then deploying them to GitHub, including handling images.
Initial Setup &amp; The Mysterious Missing Images When I first set up the script, everything seemed okay, but images weren’t showing up on the deployed site. I’d embed them in Obsidian like this: ![[20240103Capture2.jpg]].">
    <meta itemprop="datePublished" content="2025-06-06T00:00:00+00:00">
    <meta itemprop="dateModified" content="2025-06-06T00:00:00+00:00">
    <meta itemprop="wordCount" content="366">
    <meta itemprop="keywords" content="Cybrwlf,Blog">
    <title>Lessons Learned :: hugo-theme-relearn</title>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1749271447" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1749271447" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1749271447" rel="stylesheet">
    <link href="/css/theme.min.css?1749271447" rel="stylesheet">
    <link href="/css/format-html.min.css?1749271447" rel="stylesheet" id="R-format-style">
    <link href="/css/auto-complete/auto-complete.min.css?1749271447" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1749271447" defer></script>
    <script src="/js/lunr/lunr.min.js?1749271447" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1749271447" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1749271447" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1749271447" defer></script>
    <script src="/js/search.min.js?1749271447" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/posts\/lessons-learned\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='';
      window.relearn.contentLangs=['en'];
      window.relearn.index_js_url="/searchindex.en.js?1749271447";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'auto' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support html" data-url="/posts/lessons-learned/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#lessons-learned">Lessons Learned</a>
      <ul>
        <li><a href="#initial-setup--the-mysterious-missing-images">Initial Setup &amp; The Mysterious Missing Images</a></li>
        <li><a href="#understanding-image-paths-the-obsidian-vault-structure">Understanding Image Paths: The Obsidian Vault Structure</a></li>
        <li><a href="#streamlining-script-execution-python-script-location">Streamlining Script Execution: Python Script Location</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">hugo-theme-relearn</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/posts/index.html"><span itemprop="name">Posts</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Lessons Learned</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/posts/index.html" title="Posts (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/posts/test-first-post/index.html" title="Test First Post (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable posts" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="/tags/blog/index.html">Blog</a></li>
    <li><a class="term-link" href="/tags/cybrwlf/index.html">Cybrwlf</a></li>
  </ul>
</div>
  </header>

<h1 id="lessons-learned">Lessons Learned</h1>

<h2 id="lessons-learned">Lessons Learned</h2>
<p>This post documents the challenges and solutions encountered while updating the automation scripts for my Hugo blog. The goal was to streamline the process of moving notes from Obsidian to Hugo and then deploying them to GitHub, including handling images.</p>
<hr>
<h3 id="initial-setup--the-mysterious-missing-images">Initial Setup &amp; The Mysterious Missing Images</h3>
<p>When I first set up the script, everything seemed okay, but <strong>images weren&rsquo;t showing up</strong> on the deployed site. I&rsquo;d embed them in Obsidian like this: <code>![[20240103Capture2.jpg]]</code>.</p>
<p>The problem was that the Python script, <code>images.py</code>, was <strong>only looking for <code>.png</code> files</strong>! My Obsidian notes mostly contained <code>.jpg</code> images, especially those &ldquo;Pasted images&rdquo; from screenshots. The <code>re.findall</code> regular expression was too specific.</p>
<p><strong>Original (problematic) regex:</strong>
<code>re.findall(r'\[\[([^]]*\.png)\]\]', content)</code></p>
<p><strong>Solution:</strong> I had to update the regex to include <code>.jpg</code>, <code>.jpeg</code>, and other common image formats, also making it case-insensitive to catch <code>.JPG</code> or <code>.PNG</code>.</p>
<p><strong>Updated (fixed) regex:</strong>
<code>re.findall(r'\[\[([^]]*\.(?:png|jpg|jpeg|gif|bmp|webp))\]\]', content, re.IGNORECASE)</code></p>
<p>This change immediately fixed the issue of images not being copied.</p>
<p>Here&rsquo;s an example of a successful image copy after the fix:</p>
<p><a href="#R-image-91fe1f5ce73a781d82b48c056e4a36c6" class="lightbox-link"><img alt="Image of a fixed regex" class="lazy lightbox figure-image" loading="lazy" src="https://i.sstatic.net/plEgn.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-91fe1f5ce73a781d82b48c056e4a36c6"><img alt="Image of a fixed regex" class="lazy lightbox lightbox-image" loading="lazy" src="https://i.sstatic.net/plEgn.png"></a></p>
<hr>
<h3 id="understanding-image-paths-the-obsidian-vault-structure">Understanding Image Paths: The Obsidian Vault Structure</h3>
<p>Another hurdle was figuring out exactly where Obsidian was storing my images. Initially, I thought they might be in a subfolder like <code>Attachments</code> within the vault. So, my script was trying to find them at a path like:</p>
<p><code>C:\Users\cybrwlf\Documents\Obsidian Vault\Attachments\image.jpg</code></p>
<p>However, after using Obsidian&rsquo;s &ldquo;Show in system explorer&rdquo; option, I found that images like <code>20240103Capture2.jpg</code> were being saved <strong>directly in the vault&rsquo;s root</strong>: <code>C:\Users\cybrwlf\Documents\Obsidian Vault</code>.</p>
<p><strong>Solution:</strong> I updated the <code>attachments_dir</code> variable in the Python script to point directly to the Obsidian vault&rsquo;s root:</p>
<p><code>attachments_dir = r&quot;C:\Users\cybrwlf\Documents\Obsidian Vault&quot;</code></p>
<p>This ensures the Python script looks for images in the correct place.</p>
<hr>
<h3 id="streamlining-script-execution-python-script-location">Streamlining Script Execution: Python Script Location</h3>
<p>Initially, the PowerShell script hardcoded the path to <code>images.py</code>. This isn&rsquo;t ideal for portability or if the script moved.</p>
<p><strong>Old (hardcoded) approach:</strong>
<code>$pythonScriptPath = &quot;C:\Users\cybrwlf\Documents\cybrwlfblog\images.py&quot;</code></p>
<p><strong>Solution:</strong> We refactored the PowerShell &ldquo;megascript&rdquo; to <strong>dynamically determine its own directory</strong> and then set the path to <code>images.py</code> relative to that. This relies on the <code>images.py</code> script always being in the <em>same folder</em> as the PowerShell script.</p>
<p><strong>New (dynamic) approach in PowerShell:</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nv">$ScriptDir</span> <span class="p">=</span> <span class="nb">Split-Path</span> <span class="n">-Parent</span> <span class="nv">$MyInvocation</span><span class="p">.</span><span class="py">MyCommand</span><span class="p">.</span><span class="py">Definition</span>
</span></span><span class="line"><span class="cl"><span class="nb">Set-Location</span> <span class="nv">$ScriptDir</span> <span class="c"># Change to the script&#39;s directory</span>
</span></span><span class="line"><span class="cl"><span class="nv">$pythonScriptPath</span> <span class="p">=</span> <span class="nb">Join-Path</span> <span class="nv">$ScriptDir</span> <span class="s2">&#34;images.py&#34;</span></span></span></code></pre></div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Jun 6, 2025
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/index.html">
            <div class="logo-title">hugo-theme-relearn</div>
          </a>
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="parent " data-nav-id="/posts/index.html"><a class="padding" href="/posts/index.html">Posts</a><ul id="R-subsections-b4e55eb7e39db1aee6d02808a2267090" class="collapsible-menu">
            <li class="active " data-nav-id="/posts/lessons-learned/index.html"><a class="padding" href="/posts/lessons-learned/index.html">Lessons Learned</a></li>
            <li class="" data-nav-id="/posts/test-first-post/index.html"><a class="padding" href="/posts/test-first-post/index.html">Test First Post</a></li></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1749271447" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1749271447" defer></script>
    <script src="/js/theme.min.js?1749271447" defer></script>
  </body>
</html>
